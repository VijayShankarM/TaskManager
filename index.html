<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <title>Task Manager Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Inter font for modern look -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { inter: ['Inter', 'sans-serif'] },
          colors: {
            glacier: {
              50: '#f0f8ff',
              100: '#e6f0fa',
              200: '#b3d1ea',
              300: '#a3c9e2',
              400: '#7bb7e0',
              500: '#4f8fc1',
              600: '#3b6b8e',
              700: '#223046',
              800: '#1a2332',
              900: '#10141c',
              accent: '#7de2fc',
              neon: '#67e8f9',
              pastel: '#a5b4fc'
            }
          },
          boxShadow: {
            'glacier': '0 4px 32px 0 rgba(120, 160, 200, 0.18)',
            'neon': '0 0 16px 2px #67e8f9'
          }
        }
      }
    }
  </script>
  <style>
    body, html { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .modal-bg { background: rgba(16, 20, 28, 0.85); }
    .sidebar-link-active {
      background: linear-gradient(90deg, #7de2fc33 0%, #67e8f933 100%);
      color: #7de2fc !important;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-glacier-800 via-glacier-900 to-glacier-700 text-glacier-50 min-h-screen flex">
  <!-- Sidebar -->
  <aside class="fixed z-30 left-0 top-0 h-full w-64 bg-gradient-to-b from-glacier-900 to-glacier-800 shadow-2xl flex flex-col justify-between py-6 px-4">
    <div>
      <!-- Logo -->
      <div class="flex items-center gap-3 mb-8">
        <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-glacier-accent to-glacier-neon flex items-center justify-center shadow-neon">
          <svg class="w-7 h-7 text-glacier-900" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-4 0h4" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="text-2xl font-bold tracking-tight text-glacier-accent">GlacierFlow</span>
      </div>
      <!-- Remove User Info -->
      <!--
      <div class="flex items-center gap-3 mb-8">
        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="w-10 h-10 rounded-full border-2 border-glacier-accent shadow-glacier">
        <div>
          <div class="font-semibold text-glacier-50">Alex Glacier</div>
          <div class="flex items-center gap-1 text-xs text-glacier-accent">
            <span class="inline-block w-2 h-2 bg-green-400 rounded-full"></span> Online
          </div>
        </div>
      </div>
      -->
      <!-- Navigation -->
      <nav class="flex flex-col gap-2" id="sidebar-nav">
        <a href="#dashboard" data-section="dashboard" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-glacier-accent bg-glacier-800 font-semibold shadow transition hover:bg-glacier-700 hover:text-glacier-neon active:bg-glacier-700 w-full text-left">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-4 0h4" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Dashboard
        </a>
        <a href="#sharedtasks" data-section="sharedtasks" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-glacier-50 hover:text-glacier-accent hover:bg-glacier-700 transition w-full text-left">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 20h5v-2a4 4 0 00-3-3.87M9 20H4v-2a4 4 0 013-3.87M16 3.13a4 4 0 010 7.75M8 3.13a4 4 0 000 7.75" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Shared Tasks
        </a>
        <a href="#calendar" data-section="calendar" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-glacier-50 hover:text-glacier-accent hover:bg-glacier-700 transition w-full text-left">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Calendar
        </a>
      </nav>
    </div>
    <!-- Logout -->
    <button onclick="logoutHandler()" class="flex items-center gap-2 px-3 py-2 rounded-lg text-glacier-danger bg-glacier-800 hover:bg-glacier-danger hover:text-white transition font-semibold shadow mt-8 w-full">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h4a2 2 0 012 2v1" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Logout
    </button>
  </aside>
  <!-- Main Content -->
  <div class="flex-1 min-h-screen bg-gradient-to-br from-glacier-900 via-glacier-800 to-glacier-700 pl-64 flex flex-col">
    <!-- Top Navbar -->
    <header class="sticky top-0 z-20 bg-glacier-900/80 backdrop-blur flex items-center justify-between px-8 py-4 border-b border-glacier-800">
      <div class="flex items-center gap-4 w-full">
        <div class="relative flex-1 max-w-md">
          <input type="text" placeholder="Search tasks..." class="w-full pl-10 pr-4 py-2 rounded-lg bg-glacier-800 text-glacier-50 placeholder-glacier-muted border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
          <svg class="absolute left-3 top-2.5 w-5 h-5 text-glacier-muted" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
        <button onclick="scrollToSection('dashboard')" class="relative p-2 rounded-full hover:bg-glacier-800 transition">
          <svg class="w-6 h-6 text-glacier-accent" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V4a2 2 0 10-4 0v1.341C7.67 7.165 6 9.388 6 12v2.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span class="absolute top-1 right-1 w-2 h-2 bg-glacier-neon rounded-full animate-pulse"></span>
        </button>
        <!-- Remove profile from top navbar -->
        <!--
        <div class="flex items-center gap-2 ml-4">
          <div class="relative">
            <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-tr from-glacier-accent to-glacier-neon text-glacier-900 font-bold text-lg shadow-neon">AG</span>
            <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-glacier-900 rounded-full"></span>
          </div>
        </div>
        -->
      </div>
    </header>
    <!-- Dashboard Stats -->
    <section id="dashboard" class="px-8 pt-8 pb-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 scroll-mt-24">
      <div class="bg-glacier-800 rounded-xl shadow-glacier p-5 flex flex-col items-start">
        <span class="text-glacier-muted text-sm mb-1">Total Tasks</span>
        <span id="stat-total" class="text-2xl font-bold text-glacier-accent">0</span>
      </div>
      <div class="bg-glacier-800 rounded-xl shadow-glacier p-5 flex flex-col items-start">
        <span class="text-glacier-muted text-sm mb-1">Completed</span>
        <span id="stat-completed" class="text-2xl font-bold text-green-400">0</span>
      </div>
      <div class="bg-glacier-800 rounded-xl shadow-glacier p-5 flex flex-col items-start">
        <span class="text-glacier-muted text-sm mb-1">Due Today</span>
        <span id="stat-due" class="text-2xl font-bold text-glacier-neon">0</span>
      </div>
      <div class="bg-glacier-800 rounded-xl shadow-glacier p-5 flex flex-col items-start">
        <span class="text-glacier-muted text-sm mb-1">Shared</span>
        <span id="stat-shared" class="text-2xl font-bold text-glacier-pastel">0</span>
      </div>
    </section>
    <!-- Dashboard Charts & Insights -->
    <section id="analytics" class="px-8 pt-2 pb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 scroll-mt-24">
      <!-- Completion Rate -->
      <div class="bg-glacier-800 rounded-xl shadow-glacier p-6 flex flex-col items-center justify-center">
        <span class="text-glacier-muted text-sm mb-2">Task Completion Rate</span>
        <div class="relative w-28 h-28 flex items-center justify-center">
          <svg id="completionChart" width="112" height="112" viewBox="0 0 112 112">
            <circle cx="56" cy="56" r="48" stroke="#223046" stroke-width="12" fill="none"/>
            <circle id="completionCircle" cx="56" cy="56" r="48" stroke="#67e8f9" stroke-width="12" fill="none" stroke-linecap="round" stroke-dasharray="301.59" stroke-dashoffset="301.59" />
          </svg>
          <span id="completionPercent" class="absolute text-xl font-bold text-glacier-neon">0%</span>
        </div>
      </div>
      <!-- Priority Distribution -->
      <div class="bg-glacier-800 rounded-xl shadow-glacier p-6 flex flex-col">
        <span class="text-glacier-muted text-sm mb-2">Priority Distribution</span>
        <div class="flex flex-col gap-3 mt-2">
          <div>
            <div class="flex justify-between text-xs mb-1">
              <span class="text-red-400 font-semibold">High</span>
              <span id="priority-high" class="text-glacier-50">0</span>
            </div>
            <div class="w-full bg-glacier-900 rounded h-3">
              <div id="bar-high" class="bg-red-400 h-3 rounded transition-all duration-300" style="width:0%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between text-xs mb-1">
              <span class="text-yellow-300 font-semibold">Medium</span>
              <span id="priority-medium" class="text-glacier-50">0</span>
            </div>
            <div class="w-full bg-glacier-900 rounded h-3">
              <div id="bar-medium" class="bg-yellow-300 h-3 rounded transition-all duration-300" style="width:0%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between text-xs mb-1">
              <span class="text-blue-400 font-semibold">Low</span>
              <span id="priority-low" class="text-glacier-50">0</span>
            </div>
            <div class="w-full bg-glacier-900 rounded h-3">
              <div id="bar-low" class="bg-blue-400 h-3 rounded transition-all duration-300" style="width:0%"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- Quick Insights -->
      <div class="bg-glacier-800 rounded-xl shadow-glacier p-6 flex flex-col">
        <span class="text-glacier-muted text-sm mb-2">Quick Insights</span>
        <ul id="quick-insights" class="list-disc pl-5 text-glacier-50 text-sm space-y-2">
          <li>Stay productive and keep tasks up to date.</li>
          <li>Use priorities to organize your workflow.</li>
          <li>Collaborate with your team using Shared Tasks.</li>
        </ul>
      </div>
    </section>
    <!-- Add Task Form -->
    <section id="addtask" class="px-8 pb-4 scroll-mt-24">
      <form id="taskForm" autocomplete="off" class="flex flex-col md:flex-row gap-4 items-center bg-glacier-800 rounded-xl shadow-glacier p-6 mb-6">
        <input type="text" id="title" placeholder="Title" required class="flex-1 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 placeholder-glacier-muted border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
        <input type="text" id="description" placeholder="Description" class="flex-1 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 placeholder-glacier-muted border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
        <select id="status" required class="w-32 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition">
          <option value="">Status</option>
          <option value="To Do">To Do</option>
          <option value="In Progress">In Progress</option>
          <option value="Completed">Completed</option>
        </select>
        <select id="priority" required class="w-28 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition">
          <option value="">Priority</option>
          <option value="Low">Low</option>
          <option value="Medium">Medium</option>
          <option value="High">High</option>
        </select>
        <input type="date" id="dueDate" placeholder="Due Date" class="w-40 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
        <button type="submit" class="bg-gradient-to-tr from-glacier-accent to-glacier-neon text-glacier-900 font-bold px-6 py-2 rounded-lg shadow-neon hover:from-glacier-neon hover:to-glacier-accent transition">Add Task</button>
      </form>
    </section>
    <!-- Kanban Board -->
    <section id="mytasks" class="px-8 pb-8 flex-1 overflow-x-auto scroll-mt-24">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 min-h-[400px]">
        <!-- To Do -->
        <div>
          <h3 class="text-lg font-semibold text-glacier-accent mb-4">To Do</h3>
          <div id="kanban-todo" class="flex flex-col gap-4 hide-scrollbar min-h-[120px]"></div>
        </div>
        <!-- In Progress -->
        <div>
          <h3 class="text-lg font-semibold text-yellow-300 mb-4">In Progress</h3>
          <div id="kanban-inprogress" class="flex flex-col gap-4 hide-scrollbar min-h-[120px]"></div>
        </div>
        <!-- Completed -->
        <div>
          <h3 class="text-lg font-semibold text-green-400 mb-4">Completed</h3>
          <div id="kanban-completed" class="flex flex-col gap-4 hide-scrollbar min-h-[120px]"></div>
        </div>
      </div>
    </section>
    <!-- Dynamic Fullscreen Sections -->
    <div id="fullscreen-section" class="fixed inset-0 z-40 bg-glacier-900/95 flex flex-col items-center justify-center hidden"></div>
    <!-- Edit Task Modal -->
    <div id="editModal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-bg">
      <div class="bg-glacier-900 rounded-xl shadow-neon p-8 w-full max-w-lg mx-4 relative">
        <button onclick="closeEditModal()" class="absolute top-3 right-3 text-glacier-accent hover:text-glacier-neon text-2xl font-bold">&times;</button>
        <h3 class="text-xl font-semibold text-glacier-accent mb-4">Edit Task</h3>
        <form id="editTaskForm" class="flex flex-col gap-4">
          <input type="text" id="edit-title" placeholder="Title" required class="px-4 py-2 rounded-lg bg-glacier-800 text-glacier-50 placeholder-glacier-muted border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
          <input type="text" id="edit-description" placeholder="Description" class="px-4 py-2 rounded-lg bg-glacier-800 text-glacier-50 placeholder-glacier-muted border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
          <select id="edit-status" required class="px-4 py-2 rounded-lg bg-glacier-800 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition">
            <option value="">Status</option>
            <option value="To Do">To Do</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
          </select>
          <select id="edit-priority" required class="px-4 py-2 rounded-lg bg-glacier-800 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition">
            <option value="">Priority</option>
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
          </select>
          <input type="date" id="edit-dueDate" placeholder="Due Date" class="px-4 py-2 rounded-lg bg-glacier-800 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
          <div class="flex gap-4 mt-2">
            <button type="submit" class="bg-gradient-to-tr from-glacier-accent to-glacier-neon text-glacier-900 font-bold px-6 py-2 rounded-lg shadow-neon hover:from-glacier-neon hover:to-glacier-accent transition">Save</button>
            <button type="button" onclick="closeEditModal()" class="bg-glacier-800 text-glacier-accent border border-glacier-accent px-6 py-2 rounded-lg hover:bg-glacier-accent hover:text-glacier-900 transition">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <script>
    const API_BASE = "https://3z509qr451.execute-api.us-east-1.amazonaws.com/prod";
    let editingTaskId = null;
    let allTasks = [];

    // --- Dashboard Stats & Kanban Helpers ---
    function updateStats(tasks) {
      document.getElementById('stat-total').textContent = tasks.length;
      const completed = tasks.filter(t => (t.status || '').toLowerCase() === 'completed').length;
      document.getElementById('stat-completed').textContent = completed;
      // Due Today
      const today = new Date().toISOString().slice(0, 10);
      const dueToday = tasks.filter(t => t.dueDate && t.dueDate.slice(0, 10) === today).length;
      document.getElementById('stat-due').textContent = dueToday;
      // Shared (dummy: count tasks with 'shared' in description)
      const shared = tasks.filter(t => (t.description || '').toLowerCase().includes('shared')).length;
      document.getElementById('stat-shared').textContent = shared;
      // Completion Rate
      const percent = tasks.length ? Math.round((completed / tasks.length) * 100) : 0;
      document.getElementById('completionPercent').textContent = percent + '%';
      // Animate SVG circle
      const circle = document.getElementById('completionCircle');
      const circumference = 2 * Math.PI * 48;
      circle.setAttribute('stroke-dasharray', circumference);
      circle.setAttribute('stroke-dashoffset', circumference - (circumference * percent / 100));
      // Priority Distribution
      const high = tasks.filter(t => (t.priority || '').toLowerCase() === 'high').length;
      const medium = tasks.filter(t => (t.priority || '').toLowerCase() === 'medium').length;
      const low = tasks.filter(t => (t.priority || '').toLowerCase() === 'low').length;
      const total = high + medium + low || 1;
      document.getElementById('priority-high').textContent = high;
      document.getElementById('priority-medium').textContent = medium;
      document.getElementById('priority-low').textContent = low;
      document.getElementById('bar-high').style.width = (100 * high / total) + '%';
      document.getElementById('bar-medium').style.width = (100 * medium / total) + '%';
      document.getElementById('bar-low').style.width = (100 * low / total) + '%';
    }

    function renderKanban(tasks, sortBy = null) {
      // Sort tasks if sortBy is provided
      let sortedTasks = [...tasks];
      if (sortBy === 'priority') {
        const priorityOrder = { high: 1, medium: 2, low: 3 };
        sortedTasks.sort((a, b) =>
          (priorityOrder[(a.priority || '').toLowerCase()] || 4) -
          (priorityOrder[(b.priority || '').toLowerCase()] || 4)
        );
      } else if (sortBy === 'duedate') {
        sortedTasks.sort((a, b) =>
          (a.dueDate || '').localeCompare(b.dueDate || '')
        );
      }
      const todo = document.getElementById('kanban-todo');
      const inprogress = document.getElementById('kanban-inprogress');
      const completed = document.getElementById('kanban-completed');
      todo.innerHTML = '';
      inprogress.innerHTML = '';
      completed.innerHTML = '';
      sortedTasks.forEach(task => {
        const card = document.createElement('div');
        card.className = "bg-glacier-900 rounded-xl shadow-glacier p-4 flex flex-col gap-2 border border-glacier-800 hover:shadow-neon transition group";
        card.innerHTML = `
          <div class="flex items-center justify-between">
            <span class="font-semibold text-glacier-accent text-base">${task.title || ''}</span>
            <span class="text-xs px-2 py-0.5 rounded-full ${
              (task.priority || '').toLowerCase() === 'high' ? 'bg-red-400/20 text-red-300 border border-red-400' :
              (task.priority || '').toLowerCase() === 'medium' ? 'bg-yellow-300/20 text-yellow-200 border border-yellow-300' :
              'bg-blue-400/20 text-blue-200 border border-blue-400'
            }">${task.priority || 'Low'}</span>
            ${
              (task.priority || '').toLowerCase() === 'medium'
                ? `<button onclick="showShareTask('${task.taskId}')" title="Share" class="ml-2 px-2 py-1 rounded bg-glacier-800 text-glacier-accent border border-glacier-accent hover:bg-glacier-accent hover:text-glacier-900 transition text-xs font-semibold">Share</button>`
                : ''
            }
          </div>
          <div class="text-glacier-muted text-sm">${task.description || ''}</div>
          <div class="flex items-center justify-between mt-2">
            <div class="flex items-center gap-2">
              <svg class="w-4 h-4 text-glacier-neon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" stroke-linecap="round" stroke-linejoin="round"/></svg>
              <span class="text-xs">${task.dueDate ? task.dueDate.slice(0,10) : ''}</span>
            </div>
            <div class="flex items-center gap-2">
              <button onclick="editTaskPrompt('${task.taskId}')" class="ml-2 px-2 py-1 rounded bg-glacier-800 text-glacier-accent hover:bg-glacier-accent hover:text-glacier-900 transition text-xs font-semibold">Edit</button>
              <button onclick="deleteTask('${task.taskId}')" class="ml-2 px-2 py-1 rounded bg-glacier-danger text-white border border-glacier-danger transition text-xs font-semibold hover:shadow-neon hover:bg-glacier-danger hover:text-white">Delete</button>
            </div>
          </div>
        `;
        // Place in correct column
        const status = (task.status || '').toLowerCase();
        if (status === 'completed') completed.appendChild(card);
        else if (status === 'in progress') inprogress.appendChild(card);
        else todo.appendChild(card);
      });
    }

    // --- Existing AWS Lambda JS logic ---
    async function fetchTasks() {
      const res = await fetch(`${API_BASE}/tasks`);
      const data = await res.json();
      updateStats(data);
      allTasks = data;
      // Use current sort selection if present
      const sortSelect = document.getElementById('kanban-sort-select');
      const sortBy = sortSelect ? sortSelect.value : null;
      renderKanban(data, sortBy);
      window._allTasks = data; // for modal prefill
    }

    async function addTask(e) {
      e.preventDefault();
      const task = {
        title: document.getElementById('title').value,
        description: document.getElementById('description').value,
        status: document.getElementById('status').value,
        priority: document.getElementById('priority').value,
        dueDate: document.getElementById('dueDate').value
      };
      await fetch(`${API_BASE}/tasks`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(task),
      });
      document.getElementById('taskForm').reset();
      fetchTasks();
    }

    async function deleteTask(taskId) {
      await fetch(`${API_BASE}/${taskId}`, {
        method: 'DELETE',
      });
      fetchTasks();
    }

    // --- Modal Logic for Editing Tasks ---
    function editTaskPrompt(taskId) {
      editingTaskId = taskId;
      const task = (window._allTasks || []).find(t => t.taskId === taskId);
      if (!task) return;
      document.getElementById('edit-title').value = task.title || '';
      document.getElementById('edit-description').value = task.description || '';
      document.getElementById('edit-status').value = task.status || '';
      document.getElementById('edit-priority').value = task.priority || '';
      document.getElementById('edit-dueDate').value = task.dueDate ? task.dueDate.slice(0,10) : '';
      document.getElementById('editModal').classList.remove('hidden');
      setTimeout(() => {
        document.getElementById('edit-title').focus();
      }, 100);
    }

    function closeEditModal() {
      document.getElementById('editModal').classList.add('hidden');
      editingTaskId = null;
    }

    document.getElementById('editTaskForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!editingTaskId) return;
      const updated = {
        title: document.getElementById('edit-title').value,
        description: document.getElementById('edit-description').value,
        status: document.getElementById('edit-status').value,
        priority: document.getElementById('edit-priority').value,
        dueDate: document.getElementById('edit-dueDate').value
      };
      const response = await fetch(`${API_BASE}/${editingTaskId}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(updated),
      });
      if (!response.ok) {
        alert('Update failed: Server returned ' + response.status);
      }
      closeEditModal();
      fetchTasks();
    });

    // --- Sidebar/Nav click handlers ---
    function showAlert(section) {
      if (section === 'Logout') {
        alert('Logging out…');
      } else {
        alert('Clicked ' + section);
      }
    }

    // --- Sidebar/Nav scroll handlers ---
    document.querySelectorAll('.sidebar-link').forEach(link => {
      link.addEventListener('click', function(e) {
        const href = this.getAttribute('href');
        if (href && href.startsWith('#')) {
          e.preventDefault();
          if (href === "#sharedtasks") {
            showFullscreenSection('shared');
          } else if (href === "#calendar") {
            showFullscreenSection('calendar');
          } else if (href === "#dashboard") {
            showFullscreenSection('dashboard');
          } else if (href === "#mytasks") {
            showFullscreenSection('mytasks');
          } else if (href === "#analytics") {
            showFullscreenSection('analytics');
          } else {
            hideFullscreenSection();
            const target = document.querySelector(href);
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          }
        }
      });
    });

    function hideFullscreenSection() {
      const fs = document.getElementById('fullscreen-section');
      fs.classList.add('hidden');
      fs.innerHTML = '';
    }

    function showFullscreenSection(type) {
      const fs = document.getElementById('fullscreen-section');
      let html = '';
      if (type === 'dashboard') {
        // Dashboard: Add Task, ToDo, Pending, Due Today, Quotes
        html = `
          <div class="w-full h-full flex flex-col items-center justify-center overflow-y-auto">
            <button onclick="hideFullscreenSection()" class="absolute top-6 right-8 text-glacier-accent hover:text-glacier-neon text-3xl font-bold z-50">&times;</button>
            <div class="w-full max-w-3xl mx-auto">
              <div class="bg-glacier-800 rounded-xl shadow-glacier p-8 mb-8">
                <h2 class="text-2xl font-bold text-glacier-accent mb-4">Add a New Task</h2>
                <form id="taskFormDashboard" class="flex flex-col md:flex-row gap-4 items-center">
                  <input type="text" id="title-dash" placeholder="Title" required class="flex-1 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
                  <input type="text" id="description-dash" placeholder="Description" class="flex-1 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
                  <select id="status-dash" required class="w-32 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition">
                    <option value="">Status</option>
                    <option value="To Do">To Do</option>
                    <option value="In Progress">In Progress</option>
                    <option value="Completed">Completed</option>
                  </select>
                  <select id="priority-dash" required class="w-28 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition">
                    <option value="">Priority</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                  </select>
                  <input type="date" id="dueDate-dash" placeholder="Due Date" class="w-40 px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
                  <button type="submit" class="bg-gradient-to-tr from-glacier-accent to-glacier-neon text-glacier-900 font-bold px-6 py-2 rounded-lg shadow-neon hover:from-glacier-neon hover:to-glacier-accent transition">Add Task</button>
                </form>
              </div>
              <div class="flex flex-col md:flex-row gap-4 mb-8">
                <label class="flex items-center gap-2 text-glacier-accent font-semibold">
                  Sort by:
                  <select id="sort-dashboard" class="px-2 py-1 rounded bg-glacier-900 text-glacier-50 border border-glacier-700">
                    <option value="priority">Priority</option>
                    <option value="duedate">Due Date</option>
                  </select>
                </label>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-glacier-800 rounded-xl shadow-glacier p-6 flex flex-col items-center">
                  <span class="text-glacier-muted text-sm mb-1">To Do</span>
                  <span class="text-2xl font-bold text-glacier-accent" id="dash-todo-count">0</span>
                </div>
                <div class="bg-glacier-800 rounded-xl shadow-glacier p-6 flex flex-col items-center">
                  <span class="text-glacier-muted text-sm mb-1">In Progress</span>
                  <span class="text-2xl font-bold text-yellow-300" id="dash-inprogress-count">0</span>
                </div>
                <div class="bg-glacier-800 rounded-xl shadow-glacier p-6 flex flex-col items-center">
                  <span class="text-glacier-muted text-sm mb-1">Due Today</span>
                  <span class="text-2xl font-bold text-glacier-neon" id="dash-duetoday-count">0</span>
                </div>
              </div>
              <div class="bg-glacier-800 rounded-xl shadow-glacier p-8 flex flex-col items-center">
                <h3 class="text-xl font-semibold text-glacier-accent mb-4">Motivational Quotes</h3>
                <div class="text-glacier-50 text-lg font-bold text-center space-y-4">
                  <div>"The secret of getting ahead is getting started."</div>
                  <div>"Don’t watch the clock; do what it does. Keep going."</div>
                  <div>"Great things are done by a series of small things brought together."</div>
                  <div>"Success is the sum of small efforts, repeated day in and day out."</div>
                </div>
              </div>
            </div>
          </div>
        `;
        fs.innerHTML = html;
        fs.classList.remove('hidden');
        // Dashboard Add Task Form logic
        document.getElementById('taskFormDashboard').addEventListener('submit', async function(e) {
          e.preventDefault();
          const task = {
            title: document.getElementById('title-dash').value,
            description: document.getElementById('description-dash').value,
            status: document.getElementById('status-dash').value,
            priority: document.getElementById('priority-dash').value,
            dueDate: document.getElementById('dueDate-dash').value
          };
          await fetch(`${API_BASE}/tasks`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(task),
          });
          hideFullscreenSection();
          fetchTasks();
        });
        // Fill stats
        updateDashboardCounts(allTasks);
        document.getElementById('sort-dashboard').addEventListener('change', function() {
          updateDashboardCounts(allTasks, this.value);
        });
        return;
      }
      if (type === 'mytasks') {
        // My Tasks: Full details, edit, share, sort
        let htmlTasks = '';
        let sortValue = 'priority';
        htmlTasks = renderSortedTasks(allTasks, sortValue);
        html = `
          <div class="w-full h-full flex flex-col items-center justify-center overflow-y-auto">
            <button onclick="hideFullscreenSection()" class="absolute top-6 right-8 text-glacier-accent hover:text-glacier-neon text-3xl font-bold z-50">&times;</button>
            <div class="w-full max-w-4xl mx-auto">
              <div class="flex flex-col md:flex-row gap-4 mb-6">
                <label class="flex items-center gap-2 text-glacier-accent font-semibold">
                  Sort by:
                  <select id="sort-mytasks" class="px-2 py-1 rounded bg-glacier-900 text-glacier-50 border border-glacier-700">
                    <option value="priority">Priority</option>
                    <option value="duedate">Due Date</option>
                  </select>
                </label>
              </div>
              <h2 class="text-2xl font-bold text-glacier-accent mb-6">My Tasks</h2>
              <div id="mytasks-list">
                ${htmlTasks || '<div class="text-glacier-muted text-lg text-center mt-12">No tasks found.</div>'}
              </div>
            </div>
          </div>
        `;
        fs.innerHTML = html;
        fs.classList.remove('hidden');
        document.getElementById('sort-mytasks').addEventListener('change', function() {
          document.getElementById('mytasks-list').innerHTML = renderSortedTasks(allTasks, this.value);
        });
        return;
      }
      if (type === 'shared') {
        // Show shared tasks: Inbox and Sent
        // Sent: tasks that have been shared (we'll use a 'sharedWith' property for demo)
        // Inbox: tasks shared to the current user (not implemented, so show empty)
        const sentTasks = allTasks.filter(t => Array.isArray(t.sharedWith) && t.sharedWith.length > 0);
        html = `
          <div class="w-full h-full flex flex-col items-center justify-center">
            <button onclick="hideFullscreenSection()" class="absolute top-6 right-8 text-glacier-accent hover:text-glacier-neon text-3xl font-bold z-50">&times;</button>
            <div class="bg-glacier-800 rounded-xl shadow-glacier p-12 flex flex-col items-center justify-center min-h-[300px] w-full max-w-3xl mx-auto">
              <h3 class="text-3xl font-semibold text-glacier-accent mb-4">Shared Tasks</h3>
              <div class="w-full flex flex-col md:flex-row gap-8">
                <div class="flex-1">
                  <h4 class="text-lg font-bold text-glacier-neon mb-2">Inbox</h4>
                  <div class="bg-glacier-900 rounded-lg p-4 min-h-[120px] text-glacier-muted">No shared tasks in inbox.</div>
                </div>
                <div class="flex-1">
                  <h4 class="text-lg font-bold text-glacier-accent mb-2">Sent</h4>
                  <div class="bg-glacier-900 rounded-lg p-4 min-h-[120px] text-glacier-muted" id="sent-tasks-list">
                    ${
                      sentTasks.length
                        ? sentTasks.map(t =>
                            `<div class="mb-3">
                              <div class="font-semibold text-glacier-accent">${t.title}</div>
                              <div class="text-xs text-glacier-muted">To: ${t.sharedWith.join(', ')}</div>
                              <div class="text-xs text-glacier-muted">Due: ${t.dueDate ? t.dueDate.slice(0,10) : ''}</div>
                            </div>`
                          ).join('')
                        : 'No shared tasks sent.'
                    }
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        fs.innerHTML = html;
        fs.classList.remove('hidden');
        return;
      }
      if (type === 'calendar') {
        // Build a simple calendar for the current month, highlight days with tasks
        const now = new Date();
        const year = now.getFullYear();
        const month = now.getMonth();
        // Fix: getDay() returns 0 (Sun) to 6 (Sat), but calendar should start on Sunday
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        // Map: day number -> tasks
        const dayTasks = {};
        allTasks.forEach(task => {
          if (task.dueDate) {
            // Parse as local date to avoid timezone issues
            const d = new Date(task.dueDate + "T00:00:00");
            if (d.getMonth() === month && d.getFullYear() === year) {
              const day = d.getDate();
              if (!dayTasks[day]) dayTasks[day] = [];
              dayTasks[day].push(task);
            }
          }
        });
        html = `
          <div class="w-full h-full flex flex-col items-center justify-center">
            <button onclick="hideFullscreenSection()" class="absolute top-6 right-8 text-glacier-accent hover:text-glacier-neon text-3xl font-bold z-50">&times;</button>
            <div class="bg-glacier-800 rounded-xl shadow-glacier p-12 flex flex-col items-center min-h-[400px] w-full max-w-3xl mx-auto">
              <h3 class="text-3xl font-semibold text-glacier-accent mb-6">Calendar - ${now.toLocaleString('default', { month: 'long' })} ${year}</h3>
              <div class="w-full max-w-2xl">
                <div class="grid grid-cols-7 gap-2 text-center mb-2">
                  <div class="text-glacier-muted">Sun</div>
                  <div class="text-glacier-muted">Mon</div>
                  <div class="text-glacier-muted">Tue</div>
                  <div class="text-glacier-muted">Wed</div>
                  <div class="text-glacier-muted">Thu</div>
                  <div class="text-glacier-muted">Fri</div>
                  <div class="text-glacier-muted">Sat</div>
                </div>
                <div class="grid grid-cols-7 gap-2">
        `;
        // Fill empty cells before the first day
        for (let i = 0; i < firstDay; i++) {
          html += `<div></div>`;
        }
        for (let day = 1; day <= daysInMonth; day++) {
          const tasks = dayTasks[day] || [];
          html += `
            <div class="rounded-lg p-2 min-h-[48px] bg-glacier-900 border border-glacier-700 flex flex-col items-center justify-start
              ${tasks.length ? 'ring-2 ring-glacier-accent shadow-neon' : ''}
              ${day === now.getDate() && month === now.getMonth() && year === now.getFullYear() ? 'bg-glacier-accent/20' : ''}
            ">
              <span class="font-semibold text-glacier-50">${day}</span>
              ${tasks.map(t => `
                <span class="block mt-1 text-xs px-2 py-0.5 rounded bg-glacier-accent text-glacier-900 font-semibold">${t.title}</span>
              `).join('')}
            </div>
          `;
        }
        // Fill empty cells after the last day to complete the last week
        const totalCells = firstDay + daysInMonth;
        const trailing = (7 - (totalCells % 7)) % 7;
        for (let i = 0; i < trailing; i++) {
          html += `<div></div>`;
        }
        html += `
                </div>
              </div>
            </div>
          </div>
        `;
        fs.innerHTML = html;
        fs.classList.remove('hidden');
        return;
      }
      if (type === 'analytics') {
        // Analytics: show charts for completion and priority
        // Calculate stats
        const total = allTasks.length;
        const completed = allTasks.filter(t => (t.status || '').toLowerCase() === 'completed').length;
        const inprogress = allTasks.filter(t => (t.status || '').toLowerCase() === 'in progress').length;
        const todo = allTasks.filter(t => (t.status || '').toLowerCase() === 'to do').length;
        const high = allTasks.filter(t => (t.priority || '').toLowerCase() === 'high').length;
        const medium = allTasks.filter(t => (t.priority || '').toLowerCase() === 'medium').length;
        const low = allTasks.filter(t => (t.priority || '').toLowerCase() === 'low').length;
        const completionPercent = total ? Math.round((completed / total) * 100) : 0;
        html = `
          <div class="w-full h-full flex flex-col items-center justify-center overflow-y-auto">
            <button onclick="hideFullscreenSection()" class="absolute top-6 right-8 text-glacier-accent hover:text-glacier-neon text-3xl font-bold z-50">&times;</button>
            <div class="w-full max-w-3xl mx-auto">
              <h2 class="text-2xl font-bold text-glacier-accent mb-8 text-center">Analytics</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div class="bg-glacier-800 rounded-xl shadow-glacier p-8 flex flex-col items-center">
                  <span class="text-glacier-muted text-sm mb-2">Task Completion Rate</span>
                  <div class="relative w-40 h-40 flex items-center justify-center mb-2">
                    <svg width="160" height="160" viewBox="0 0 160 160">
                      <circle cx="80" cy="80" r="70" stroke="#223046" stroke-width="16" fill="none"/>
                      <circle cx="80" cy="80" r="70" stroke="#67e8f9" stroke-width="16" fill="none" stroke-linecap="round"
                        stroke-dasharray="439.82"
                        stroke-dashoffset="${439.82 - (439.82 * completionPercent / 100)}"
                        style="transition:stroke-dashoffset 0.6s;"/>
                    </svg>
                    <span class="absolute text-3xl font-bold text-glacier-neon">${completionPercent}%</span>
                  </div>
                  <div class="flex justify-between w-full mt-2">
                    <span class="text-glacier-muted">Completed</span>
                    <span class="text-green-400 font-bold">${completed}</span>
                  </div>
                  <div class="flex justify-between w-full">
                    <span class="text-glacier-muted">In Progress</span>
                    <span class="text-yellow-300 font-bold">${inprogress}</span>
                  </div>
                  <div class="flex justify-between w-full">
                    <span class="text-glacier-muted">To Do</span>
                    <span class="text-glacier-accent font-bold">${todo}</span>
                  </div>
                </div>
                <div class="bg-glacier-800 rounded-xl shadow-glacier p-8 flex flex-col items-center">
                  <span class="text-glacier-muted text-sm mb-2">Priority Distribution</span>
                  <div class="w-full mt-4">
                    <div class="flex justify-between text-xs mb-1">
                      <span class="text-red-400 font-semibold">High</span>
                      <span class="text-glacier-50">${high}</span>
                    </div>
                    <div class="w-full bg-glacier-900 rounded h-4 mb-3">
                      <div class="bg-red-400 h-4 rounded transition-all duration-300" style="width:${total ? (100 * high / total) : 0}%"></div>
                    </div>
                    <div class="flex justify-between text-xs mb-1">
                      <span class="text-yellow-300 font-semibold">Medium</span>
                      <span class="text-glacier-50">${medium}</span>
                    </div>
                    <div class="w-full bg-glacier-900 rounded h-4 mb-3">
                      <div class="bg-yellow-300 h-4 rounded transition-all duration-300" style="width:${total ? (100 * medium / total) : 0}%"></div>
                    </div>
                    <div class="flex justify-between text-xs mb-1">
                      <span class="text-blue-400 font-semibold">Low</span>
                      <span class="text-glacier-50">${low}</span>
                    </div>
                    <div class="w-full bg-glacier-900 rounded h-4">
                      <div class="bg-blue-400 h-4 rounded transition-all duration-300" style="width:${total ? (100 * low / total) : 0}%"></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="bg-glacier-800 rounded-xl shadow-glacier p-8 flex flex-col items-center">
                <h3 class="text-xl font-semibold text-glacier-accent mb-4">Summary</h3>
                <div class="text-glacier-50 text-lg font-bold text-center space-y-2">
                  <div>Total Tasks: ${total}</div>
                  <div>Completed: ${completed}</div>
                  <div>In Progress: ${inprogress}</div>
                  <div>To Do: ${todo}</div>
                </div>
              </div>
            </div>
          </div>
        `;
        fs.innerHTML = html;
        fs.classList.remove('hidden');
        return;
      }
      // ...existing code...
    }

    // --- My Tasks: show brief of tasks ---
    // (already handled by renderSortedTasks, which shows a brief for each task)

    // --- Logout handler ---
    function logoutHandler() {
      alert('Logging out…');
    }

    document.getElementById('taskForm').addEventListener('submit', addTask);
    fetchTasks();

    // Share task modal (basic, for demonstration)
    window.showShareTask = function(taskId) {
      const task = allTasks.find(t => t.taskId === taskId);
      if (!task) return;
      const fs = document.getElementById('fullscreen-section');
      fs.innerHTML = `
        <div class="w-full h-full flex flex-col items-center justify-center">
          <button onclick="hideFullscreenSection()" class="absolute top-6 right-8 text-glacier-accent hover:text-glacier-neon text-3xl font-bold z-50">&times;</button>
          <div class="bg-glacier-800 rounded-xl shadow-glacier p-12 flex flex-col items-center justify-center min-h-[300px] w-full max-w-lg mx-auto">
            <h3 class="text-2xl font-semibold text-glacier-accent mb-4">Share Task: ${task.title}</h3>
            <form id="shareTaskForm" class="flex flex-col gap-4 w-full">
              <input type="email" id="share-email" placeholder="Recipient Email" required class="px-4 py-2 rounded-lg bg-glacier-900 text-glacier-50 border border-glacier-700 focus:outline-none focus:ring-2 focus:ring-glacier-accent transition" />
              <button type="submit" class="bg-gradient-to-tr from-glacier-accent to-glacier-neon text-glacier-900 font-bold px-6 py-2 rounded-lg shadow-neon hover:from-glacier-neon hover:to-glacier-accent transition">Send</button>
            </form>
            <div id="share-success" class="hidden text-green-400 mt-4 font-semibold text-center">Task shared successfully!</div>
          </div>
        </div>
      `;
      fs.classList.remove('hidden');
      document.getElementById('shareTaskForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const email = document.getElementById('share-email').value;
        // Update the task with sharedWith property (simulate backend update)
        // If sharedWith doesn't exist, create it
        if (!Array.isArray(task.sharedWith)) task.sharedWith = [];
        if (!task.sharedWith.includes(email)) task.sharedWith.push(email);

        // Simulate backend update (PUT)
        await fetch(`${API_BASE}/${task.taskId}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ ...task, sharedWith: task.sharedWith }),
        });

        document.getElementById('share-success').classList.remove('hidden');
        document.getElementById('share-email').value = '';
        document.getElementById('shareTaskForm').classList.add('hidden');
        setTimeout(() => {
          hideFullscreenSection();
          fetchTasks(); // Refresh tasks so sent box updates
        }, 1500);
      });
    }

    // Add sort controls above the Kanban board (ensure only one is added)
    document.addEventListener('DOMContentLoaded', function() {
      const mytasksSection = document.getElementById('mytasks');
      if (mytasksSection && !document.getElementById('kanban-sort-controls')) {
        const sortDiv = document.createElement('div');
        sortDiv.className = "flex items-center gap-2 mb-4";
        sortDiv.id = "kanban-sort-controls";
        sortDiv.innerHTML = `
          <label class="text-glacier-accent font-semibold">Sort by:</label>
          <select id="kanban-sort-select" class="px-2 py-1 rounded bg-glacier-900 text-glacier-50 border border-glacier-700">
            <option value="">Default</option>
            <option value="priority">Priority</option>
            <option value="duedate">Due Date</option>
          </select>
        `;
        // Insert before the Kanban board grid
        mytasksSection.insertBefore(sortDiv, mytasksSection.querySelector('.grid'));
        document.getElementById('kanban-sort-select').addEventListener('change', function() {
          renderKanban(allTasks, this.value);
        });
      }
      // Initial render with default sort
      renderKanban(allTasks);
    });

    // Update fetchTasks to use current sort
    async function fetchTasks() {
      const res = await fetch(`${API_BASE}/tasks`);
      const data = await res.json();
      updateStats(data);
      allTasks = data;
      // Use current sort selection if present
      const sortSelect = document.getElementById('kanban-sort-select');
      const sortBy = sortSelect ? sortSelect.value : null;
      renderKanban(data, sortBy);
      window._allTasks = data; // for modal prefill
    }
  </script>
</body>
</html>
